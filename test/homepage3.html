<html>
    <head>
        <meta charset="utf-8">
        <script src="esl.js"></script>
        <script src="config.js"></script>
        <script src="./lib/jquery.min.js"></script>
    </head>




    <body>
        <style>
            html,
            body {
                padding: 0;
                margin: 0;
            }
            .ch-main {
                position: relative;
                margin-top: 100px;
                margin-left: 100px;
            }
            .ch-pc-chart {
                width: 590px;
                height: 373px;
            }
            .ch-mobile-box {
                position: absolute;
                left: 433px;
                top: -58px;
                width: 259px;
                height: 482px;
                z-index: 300;
                user-select: none;
            }
            .ch-mobile-content {
                position: absolute;
                overflow: hidden;
                width: 198px;
                height: 331px;
                border-bottom-left-radius: 5px;
                border-bottom-right-radius: 5px;
                left: 463px;
                top: 19px;
                background: #333;
                z-index: 300;
                padding: 0;
                margin: 0;
            }
            .ch-mobile-chart {
                width: 200%;
                height: 200%;
                transform-origin:0 0;
                transform:scale(0.5);
                padding: 0;
                margin: 0;
            }
        </style>
        <div class="ch-main">
            <div class="ch-pc-chart"></div>
            <img class="ch-mobile-box" src="./data/iphone.png"/>
            <div class="ch-mobile-content">
                <div class="ch-mobile-chart"></div>
            </div>
        </div>





        <script type="text/javascript">

        function render(echarts) {
            // var data = {"years":[1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"lifeExpectancy":[29.5734572,29.5734572,29.5734572,29.5734572,29.5734572,29.5734572,29.5734572,31.12082604,30.20106663,29.93047652,30.74960789,31.40217766,20.5,36.428,41.056,57.084,57.5768,57.9696,58.7624,60.7552,63.148,64.6408,63.7336,66.6264,67.3692,68.382,68.6248,68.2776,68.7404,69.5332,69.116,69.1788,68.9616,68.9144,68.3872,68.5,68.6,68.7,68.7,68.6,68.2,68,67.8,67.7,67.4,67.3,67.5,67.9,67.7,67.4,68.2,69.8,70.1,70,69.8,69.6,69.4,68,65.2,63.6,64.2,65.9,67.4,67.6,66.2,65.4,65.1,64.9,64.8,65,64.8,66.1,67.2,67.6,68.3,68.7,69.4,70.4,71.3,72.21,73.13],"income":[1430,1447,1464,1562,1666,1778,1896,2023,2158,2233,3087,3487,1489,3779,5632,7514,7424,7775,7981,8234,8787,9465,9496,10037,9755,10496,10908,11027,10620,11836,12363,12823,13256,13902,13972,14915,15170,15113,16236,16594,16530,17192,17487,17818,17632,17557,17619,17951,18417,18527,18576,19221,19355,19660,19906,19349,18332,15661,14320,12535,12013,11597,11779,11173,11925,13173,13902,14629,15768,16967,18118,19660,21374,22506,20739,21664,22570,23299,23561,23293,23038],"population":[31088398,31088398,31861526,34134430,37420913,41023821,44966686,49288504,53996807,59151534,64836675,71044207,77871987,85369549,93588981,102798657,104306354,105969442,107729541,109537868,111355224,113152347,114909562,116615781,118266807,119860289,121390327,122842753,124193114,125412397,126483874,127396324,128165823,128837792,129475269,130126383,130808492,131517584,132254362,133012558,133788113,134583945,135406786,136259517,137144808,138063062,139006739,139969243,140951400,141955200,142975753,144016095,145056221,146040116,146895053,147568552,148040354,148322473,148435811,148416292,148293265,148078355,147772805,147385440,146924174,146400951,145818121,145195521,144583147,144043914,143622566,143338407,143180249,143123163,143126660,143158099,143211476,143287536,143367341,143429435,143456918]};
            var mainColor = '#dd4541';
            var series1Color = '#c23531';
            var series2Color = 'rgba(4,127,154,1)';
            var series3Color = '#2f4554';
            var areaColor = {
                x: 0,
                x2: 0,
                y: 0,
                y2: 1,
                colorStops: [
                    {offset: 0, color: series3Color},
                    {offset: 1, color: 'rgba(0,0,0,0)'}
                ]
            };
            var barColor = {
                x: 0,
                x2: 0,
                y: 0,
                y2: 1,
                colorStops: [
                    {offset: 0, color: 'rgba(4,127,154,0.6)'},
                    {offset: 0.5, color: series2Color},
                    {offset: 1, color: 'rgba(4,127,154,0.8)'}
                ]
            };
            var minValueSpan = 5;
            var dataZoomStart = 15;
            var dataZoomEnd = 50

            var categoryData = [];
            var series0Data = [];
            var series1Data = [];
            var series2Data = [];

            for (var i = 0; i < 30; i++) {
                categoryData.push('c' + i);
                series0Data.push(Math.random() * 100);
                series1Data.push(Math.random() * 100);
                series2Data.push(Math.random() * 100);
            }


            var y3Formatter = function (val) {
                return (val / 1000).toFixed(0) + ' k';
            };
            var y3AxisPointerFormatter = function (params) {
                return (params.value / 1000).toFixed(0) + ' k';
            };

            var option = {
                backgroundColor: '#fff',
                // textStyle: {
                //     fontFamily: 'Tahoma'
                // },
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'cross'
                    },
                    padding: 5,
                    backgroundColor: '#eee',
                    borderColor: '#999',
                    borderWidth: 1,
                    textStyle: {
                        color: '#222'
                    },
                    extraCssText: 'z-index: 200'
                },
                axisPointer: {
                    link: [{xAxisIndex: 'all'}],
                    label: {
                        textStyle: {
                            color: '#222'
                        }
                    },
                    z: 500
                },
                xAxis: [{
                    splitLine: {
                        show: false
                    },
                    axisTick: {
                        show: false
                    },
                    axisLine: {
                        show: false,
                        lineStyle: {
                            color: '#ddd'
                        }
                    },
                    axisLabel: {
                        show: false,
                        textStyle: {
                            color: '#ddd'
                        }
                    },
                    axisPointer: {
                        type: 'shadow',
                        label: {
                            show: false
                        }
                    },
                    data: categoryData
                }, {
                    gridIndex: 1,
                    splitLine: {
                        show: false
                    },
                    axisTick: {
                        show: false,
                        lineStyle: {
                            color: '#ddd'
                        }
                    },
                    axisLine: {
                        show: false,
                        lineStyle: {
                            color: '#ddd'
                        }
                    },
                    axisLabel: {
                        textStyle: {
                            color: '#ddd'
                        }
                    },
                    data: categoryData
                }],
                yAxis: [{
                    splitNumber: 3,
                    nameTextStyle: {
                        color: '#ccc',
                        fontSize: 18
                    },
                    axisLine: {
                        lineStyle: {
                            color: '#ddd'
                        }
                    },
                    axisTick: {
                        inside: true,
                        lineStyle: {
                            color: '#ddd'
                        }
                    },
                    splitLine: {
                        show: false
                    },
                    axisLabel: {
                        inside: true,
                        textStyle: {
                            color: '#ddd'
                        }
                    },
                    axisPointer: {
                        label: {
                            textStyle: {
                                color: series1Color
                            }
                        }
                    },
                    z: 200
                }, {
                    position: 'right',
                    gridIndex: 1,
                    splitNumber: 3,
                    nameTextStyle: {
                        color: '#ccc',
                        fontSize: 18
                    },
                    axisLine: {
                        lineStyle: {
                            color: '#ddd'
                        }
                    },
                    axisTick: {
                        inside: true,
                        lineStyle: {
                            color: '#ddd'
                        }
                    },
                    splitLine: {
                        show: false
                    },
                    axisLabel: {
                        inside: true,
                        formatter: function (value) {
                            return (value / 1000000).toFixed(0) + ' M';
                        },
                        textStyle: {
                            color: '#ddd'
                        }
                    },
                    axisPointer: {
                        label: {
                            formatter: function (param) {
                                return (param.value / 1000000).toFixed(0) + ' M';
                            },
                            textStyle: {
                                color: series2Color
                            }
                        }
                    },
                    z: 200
                }, {
                    gridIndex: 1,
                    splitNumber: 1,
                    nameTextStyle: {
                        color: '#ccc',
                        fontSize: 18
                    },
                    axisLine: {
                        lineStyle: {
                            color: '#ddd'
                        }
                    },
                    axisTick: {
                        inside: true,
                        lineStyle: {
                            color: '#ddd'
                        }
                    },
                    splitLine: {
                        show: false
                    },
                    axisLabel: {
                        inside: true,
                        formatter: y3Formatter,
                        textStyle: {
                            color: '#ddd'
                        }
                    },
                    axisPointer: {
                        label: {
                            formatter: y3AxisPointerFormatter
                        }
                    },
                    z: 40
                }],
                grid: [{
                    left: 50,
                    right: 38,
                    bottom: 228,
                    height: 123
                }, {
                    left: 50,
                    right: 38,
                    bottom: 84,
                    height: 112
                }],
                dataZoom: [{
                    start: dataZoomStart,
                    end: dataZoomEnd,
                    left: 50,
                    right: 38,
                    bottom: 35,
                    height: 4,
                    showDataShadow: false,
                    borderColor: 'transparent',
                    backgroundColor: '#e2e2e2',
                    // handleIcon: 'M10.7,11.9H9.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z', // jshint ignore:line
                    handleIcon: 'M10.93,0.61c5.927,0,10.733,4.762,10.733,10.637S16.857,21.883,10.93,21.883 c-5.928,0-10.733-4.762-10.733-10.636S5.002,0.61,10.93,0.61z M15.646,10.247H6.215v2h9.431V10.247z', // jshint ignore:line
                    handleSize: 20,
                    handleStyle: {
                        color: mainColor,
                        shadowBlur: 6,
                        shadowOffsetX: 1,
                        shadowOffsetY: 2,
                        shadowColor: '#aaa'
                    },
                    fillerColor: mainColor,
                    labelFormatter: '',
                    // borderColor: 'rgba(0,0,0,0.2)',
                    xAxisIndex: [0, 1],
                    minValueSpan: minValueSpan
                }, {
                    start: dataZoomStart,
                    end: dataZoomEnd,
                    type: 'inside',
                    xAxisIndex: [0, 1],
                    minValueSpan: minValueSpan
                }],
                series: [
                    {
                        type: 'bar',
                        name: 'seriesA',
                        id: 'gridScatter',
                        showSymbol: false,
                        symbolSize: 10,
                        hoverAnimation: false,
                        itemStyle: {
                            normal: {
                                color: series1Color,
                                barBorderRadius: 10
                            }
                        },
                        data: series0Data
                    },
                    {
                        type: 'line',
                        name: 'seriesB',
                        yAxisIndex: 1,
                        xAxisIndex: 1,
                        itemStyle: {
                            normal: {
                                color: barColor
                            }
                        },
                        data: series1Data
                    },
                    {
                        type: 'line',
                        name: 'seriesC',
                        xAxisIndex: 1,
                        yAxisIndex: 2,
                        showSymbol: false,
                        symbolSize: 10,
                        hoverAnimation: false,
                        areaStyle: {
                            normal: {
                                color: areaColor
                            }
                        },
                        itemStyle: {
                            normal: {
                                color: series3Color
                            }
                        },
                        data: series2Data
                    }
                ]
            };
            var myChart = echarts.init($('.ch-pc-chart')[0]);
            myChart.setOption(option);











            var option2 = {
                backgroundColor: '#3aadd1',
                // textStyle: {
                //     fontFamily: 'Tahoma'
                // },
                tooltip: {
                    show: true,
                    triggerOn: 'none',
                    alwaysShowContent: true,
                    extraCssText: 'width: 150px',
                    position: function (pos, params, dom, rect, size) {
                        return {top: 10, left: 'center'};
                    },
                    backgroundColor: 'transparent',
                    formatter: function (params) {
                        return echarts.util.map(['seriesA', 'seriesB', 'seriesC'], function (seriesName) {
                            for (var i = 0; i < params.length; i++) {
                                var param = params[i];
                                var encodeHTML = echarts.format.encodeHTML;
                                var color = param.color;
                                if (color.colorStops) {
                                    color = color.colorStops[0].color;
                                }
                                var dotStyle = [
                                    'display:inline-block',
                                    'margin-right:5px',
                                    'border-radius:10px',
                                    'width:9px',
                                    'height:9px',
                                    'background-color:' + encodeHTML(color)
                                ].join(';') + ';';
                                var textStyle = 'color:' + encodeHTML(color) + ';';
                                if (param.seriesName === seriesName) {
                                    return '<span style="' + dotStyle + '"></span>'
                                        + '<span style="' + textStyle + '">'
                                        + param.seriesName + '：' + param.value
                                        + '</span>';
                                }
                            }
                        }).join('<br>');
                    }
                },
                axisPointer: {
                    triggerOn: 'none',
                    link: [{xAxisIndex: 'all'}],
                    label: {
                        textStyle: {
                            color: '#222'
                        }
                    },
                    z: 500
                },
                xAxis: [{
                    splitLine: {
                        show: false
                    },
                    axisTick: {
                        show: false
                    },
                    axisLine: {
                        show: false,
                        lineStyle: {
                            color: '#ddd'
                        }
                    },
                    axisLabel: {
                        show: false,
                        textStyle: {
                            color: '#ddd'
                        }
                    },
                    axisPointer: {
                        show: true,
                        value: '1960',
                        type: 'shadow',
                        label: {
                            show: false
                        },
                        handle: {
                            show: true,
                            size: 0
                        }
                    },
                    data: categoryData
                }, {
                    gridIndex: 1,
                    splitLine: {
                        show: false
                    },
                    axisTick: {
                        show: false,
                        lineStyle: {
                            color: '#ddd'
                        }
                    },
                    axisLine: {
                        show: false,
                        lineStyle: {
                            color: '#ddd'
                        }
                    },
                    axisLabel: {
                        showMaxLabel: true,
                        textStyle: {
                            color: '#ddd'
                        }
                    },
                    axisPointer: {
                        show: true,
                        value: '1960',
                        handle: {
                            show: true,
                            margin: 45,
                            size: 30
                        }
                    },
                    data: categoryData
                }],
                yAxis: [{
                    splitNumber: 3,
                    nameTextStyle: {
                        color: '#ccc',
                        fontSize: 18
                    },
                    axisLine: {
                        lineStyle: {
                            color: '#ddd'
                        }
                    },
                    axisTick: {
                        inside: true,
                        lineStyle: {
                            color: '#ddd'
                        }
                    },
                    splitLine: {
                        show: false
                    },
                    axisLabel: {
                        inside: true,
                        textStyle: {
                            color: '#ddd'
                        }
                    },
                    z: 200
                }, {
                    gridIndex: 1,
                    position: 'right',
                    splitNumber: 3,
                    nameTextStyle: {
                        color: '#ccc',
                        fontSize: 18
                    },
                    axisLine: {
                        lineStyle: {
                            color: '#ddd'
                        }
                    },
                    axisTick: {
                        inside: true,
                        lineStyle: {
                            color: '#ddd',

                        }
                    },
                    splitLine: {
                        show: false
                    },
                    axisLabel: {
                        inside: true,
                        formatter: function (value) {
                            return (value / 1000000).toFixed(0) + ' M';
                        },
                        textStyle: {
                            color: '#ddd'
                        }
                    },
                    z: 200
                }, {
                    gridIndex: 1,
                    splitNumber: 1,
                    nameTextStyle: {
                        color: '#ccc',
                        fontSize: 18
                    },
                    axisLine: {
                        lineStyle: {
                            color: '#ddd'
                        }
                    },
                    axisTick: {
                        inside: true,
                        lineStyle: {
                            color: '#ddd'
                        }
                    },
                    splitLine: {
                        show: false
                    },
                    axisLabel: {
                        inside: true,
                        formatter: y3Formatter,
                        textStyle: {
                            color: '#ddd'
                        }
                    },
                    z: 40
                }],
                grid: [{
                    left: 20,
                    right: 20,
                    top: 95,
                    height: 140
                }, {
                    left: 20,
                    right: 20,
                    top: 270,
                    height: 100
                }],
                dataZoom: [{
                    start: dataZoomStart,
                    end: dataZoomEnd,
                    type: 'inside',
                    xAxisIndex: [0, 1],
                    minValueSpan: minValueSpan
                }],
                series: [
                    {
                        type: 'bar',
                        name: 'seriesA',
                        id: 'gridScatter',
                        showSymbol: false,
                        symbolSize: 10,
                        hoverAnimation: false,
                        itemStyle: {
                            normal: {
                                color: series1Color,
                                barBorderRadius: 5
                            }
                        },
                        data: series0Data
                    },
                    {
                        type: 'line',
                        name: 'seriesB',
                        yAxisIndex: 1,
                        xAxisIndex: 1,
                        itemStyle: {
                            normal: {
                                color: barColor
                            }
                        },
                        data: series1Data
                    },
                    {
                        type: 'line',
                        name: 'seriesC',
                        xAxisIndex: 1,
                        yAxisIndex: 2,
                        showSymbol: false,
                        symbolSize: 10,
                        hoverAnimation: false,
                        areaStyle: {
                            normal: {
                                color: areaColor
                            }
                        },
                        itemStyle: {
                            normal: {
                                color: series3Color
                            }
                        },
                        data: series2Data
                    }
                ]
            };
            var myChart2 = echarts.init($('.ch-mobile-chart')[0]);
            myChart2.setOption(option2);


            bindAction(myChart, myChart2, 'a');
            bindAction(myChart2, myChart, 'b');

            function bindAction(fromChart, toChart, flag) {
                fromChart.on('updateAxisPointer', function (params) {
                    toChart.dispatchAction(
                        toChart.makeActionFromEvent(params),
                        true
                    );
                });

                fromChart.on('dataZoom', function (params) {
                    var payload = params.batch ? params.batch[0] : params;
                    toChart.dispatchAction({
                        type: 'dataZoom',
                        dataZoomIndex: 0,
                        start: payload.start,
                        end: payload.end
                    }, true);
                });
            }

        }

        </script>




        <script type="text/javascript">
            require([
                'echarts',
                'echarts/chart/bar',
                'echarts/chart/line',
                'echarts/component/legend',
                'echarts/component/visualMap',
                'echarts/component/dataZoom',
                'echarts/component/grid',
                'echarts/component/tooltip'
            ], function (echarts) {
                render(echarts);
            });
        </script>

    </body>
</html>